# Правила работы с памятью

## Главный принцип

**Файлы > контекст.** Контекст временный — компакция его сотрёт. Файлы постоянные.

Если что-то важное произошло — запиши в файл. Не надейся что запомнишь.

---

## Что записывать

### Всегда записывай:
- Решения владельца ("делаем так, а не иначе")
- Ошибки и грабли (чтобы не повторять)
- Предпочтения ("не используй это слово", "всегда делай так")
- Результаты экспериментов (что сработало, что нет)
- Факты о проекте (домен, стек, ниша, аудитория)

### Не записывай:
- Промежуточные черновики
- Очевидные вещи
- Дубли того, что уже есть

---

## Куда записывать

| Что | Куда |
|-----|------|
| Текущая работа, snapshots | `memory/YYYY-MM-DD.md` |
| Долгосрочные факты и решения | `MEMORY.md` |
| Что сработало | `learning/approved-patterns.md` |
| Что НЕ сработало | `learning/anti-patterns.md` |
| Правила обслуживания | `HEARTBEAT.md` |

---

## Формат записи

Дата + контекст + суть. Минимум слов, максимум пользы.

```markdown
## 2025-01-15: Публикация статей
**Решение:** Публикуем через API, не через админку
**Причина:** API быстрее и можно автоматизировать
```

---

## Жизненный цикл

1. **Ежедневно:** записи идут в `memory/YYYY-MM-DD.md`
2. **Еженедельно:** важное из `memory/` переносится в `MEMORY.md`
3. **Ежемесячно:** старые `memory/` файлы (>30 дней) архивируются в `memory/archive/`
4. **MEMORY.md** — всегда актуальный, компактный, без мусора

---

## Восстановление после потери контекста

Если агент потерял контекст (новый сеанс, компакция):

1. Прочитай `MEMORY.md` — ключевые факты
2. Прочитай `memory/` за сегодня — что уже сделано
3. Прочитай `learning/` — что работает и что нет
4. Продолжай работу как будто ничего не случилось

Память в файлах = бессмертный контекст.
